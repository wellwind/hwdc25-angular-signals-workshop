<div class="flex justify-between items-center mb-6">
  <h2 class="text-2xl font-bold">數據分析儀表板</h2>
  <div class="flex rounded-md shadow-sm">
    <button class="relative inline-flex items-center px-4 py-2 rounded-l-md border border-gray-300 dark:border-gray-600 text-sm font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 focus:z-10 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500" [class.bg-blue-500]="userId() === 1" [class.text-white]="userId() === 1" (click)="setUser(1)">
      使用者 1 (Mike)
    </button>
    <button class="-ml-px relative inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 focus:z-10 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500" [class.bg-blue-500]="userId() === 2" [class.text-white]="userId() === 2" (click)="setUser(2)">
      使用者 2 (Jane)
    </button>
    <button class="-ml-px relative inline-flex items-center px-4 py-2 rounded-r-md border border-gray-300 dark:border-gray-600 text-sm font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 focus:z-10 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500" [class.bg-blue-500]="userId() === 99" [class.text-white]="userId() === 99" (click)="setUser(99)">
      使用者 99 (不存在)
    </button>
  </div>
</div>

<div class="grid md:grid-cols-3 gap-6">
  <!-- User Profile (resource) -->
  <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 border border-transparent dark:border-gray-700">
    <h2 class="text-xl font-bold mb-4">使用者個人資料</h2>
      @switch (user.status()) {
        @case ('loading') {
          <div class="bg-gray-200 dark:bg-gray-700 rounded animate-pulse h-24 w-full"></div>
        }
        @case ('error') {
          <div class="bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-600 text-red-800 dark:text-red-200 px-4 py-3 rounded-lg" role="alert">
            <strong class="font-bold">錯誤:</strong>
            <span class="block sm:inline">{{ user.error()?.cause }}</span>
          </div>
        }
        @case ('resolved') {
          @if (user.value(); as user) {
            <div class="prose dark:prose-invert">
              <h3>{{ user.name }}</h3>
              <p>Email: {{ user.email }}</p>
            </div>
          }
        }
      }
  </div>

  <!-- Activity Log (rxResource) -->
  <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 border border-transparent dark:border-gray-700">
    <h2 class="text-xl font-bold mb-4">即時活動紀錄</h2>
    <p class="text-lg font-mono">{{ activityLog.value() }}</p>
  </div>

  <!-- User Tasks (httpResource) -->
  <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 border border-transparent dark:border-gray-700">
    <h2 class="text-xl font-bold mb-4">使用者任務</h2>
      @switch (tasks.status()) {
        @case ('loading') {
          <div class="bg-gray-200 dark:bg-gray-700 rounded animate-pulse h-24 w-full"></div>
        }
        @case ('error') {
          <div class="bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-600 text-red-800 dark:text-red-200 px-4 py-3 rounded-lg" role="alert">
            <strong class="font-bold">錯誤:</strong>
            <span class="block sm:inline">{{ tasks.statusCode() }}</span>
          </div>
        }
        @case ('resolved') {
          <ul class="list-disc list-inside prose dark:prose-invert">
            @for (task of tasks.value(); track task.id) {
              <li>{{ task.title }}</li>
            } @empty {
              <p>找不到此使用者的任務。</p>
            }
          </ul>
        }
      }
  </div>
</div>
